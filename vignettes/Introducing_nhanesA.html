<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Christopher J. Endres" />

<meta name="date" content="2025-01-05" />

<title>Introducing nhanesA</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introducing nhanesA</h1>
<h4 class="author">Christopher J. Endres</h4>
<h4 class="date">2025-01-05</h4>



<div id="background" class="section level2">
<h2>Background</h2>
<p>The nhanesA R package was developed to allow investigators to easily
explore and retrieve data from the National Health and Nutrition
Examination Survey (NHANES). The survey assesses overall health and
nutrition of adults and children in the United States, and is conducted
by the National Center for Health Statistics (NCHS). NHANES data are
publicly available at: <a href="https://www.cdc.gov/nchs/nhanes/" class="uri">https://www.cdc.gov/nchs/nhanes/</a> and are reported in
thousands of peer-reviewed journal publications every year.</p>
</div>
<div id="nhanes-data" class="section level2">
<h2>NHANES Data</h2>
<p>Since 1999, the NHANES survey has been conducted continuously, and
the surveys during that period are referred to as “continuous NHANES” to
distinguish from several prior surveys. Continuous NHANES surveys are
grouped in two-year intervals, with the first interval being
1999-2000.</p>
<p>Most NHANES data are in the form of tables in SAS ‘XPT’ format. The
survey is grouped into five data categories that are publicly available,
as well as an additional category (Limited access data) that requires
written justification and prior approval before access. Package nhanesA
is intended mostly for use with the publicly available data, but some
information pertaining to the limited access data can also be
retrieved.</p>
<p>The five publicly available data categories are: - Demographics
(DEMO) - Dietary (DIET) - Examination (EXAM) - Laboratory (LAB) -
Questionnaire (Q). The abbreviated forms in parentheses may be
substituted for the long form in nhanesA commands.</p>
<p>For limited access data, the available tables and variable names can
be listed, but the data cannot be downloaded directly. To indicate
limited access data in nhanesA functions, use: - Limited (LTD)</p>
<div id="list-nhanes-tables" class="section level3">
<h3>List NHANES Tables</h3>
<p>To quickly get familiar with NHANES data, it is helpful to display a
listing of tables. Use nhanesTables to get information on tables that
are available for a given category for a given year.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(nhanesA)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">nhanesTables</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="dv">2005</span>)</span></code></pre></div>
<pre><code>##    Data.File.Name                             Data.File.Description
## 1           BPX_D                                    Blood Pressure
## 2           BMX_D                                     Body Measures
## 3           AUX_D                                        Audiometry
## 4        AUXTYM_D                         Audiometry - Tympanometry
## 5        DXXFEM_D          Dual Energy X-ray Absorptiometry - Femur
## 6        OPXFDT_D     Ophthalmology - Frequency Doubling Technology
## 7           OHX_D                                       Oral Health
## 8        PAXRAW_D                         Physical Activity Monitor
## 9           VIX_D                                            Vision
## 10        DXXAG_D Dual Energy X-ray Absorptiometry - Android/Gynoid
## 11        AUXAR_D                      Audiometry - Acoustic Reflex
## 12       OPXRET_D                   Ophthalmology - Retinal Imaging
## 13       DXXSPN_D          Dual Energy X-ray Absorptiometry - Spine</code></pre>
<p>Note that the two-year survey intervals begin with the odd year. For
convenience, only a single 4-digit year is entered such that
<code>nhanesTables(&#39;EXAM&#39;, 2005)</code> and
<code>nhanesTables(&#39;EXAM&#39;, 2006)</code> yield identical output.</p>
</div>
<div id="list-variables-in-an-nhanes-table" class="section level3">
<h3>List Variables in an NHANES Table</h3>
<p>After viewing the output, we decide we are interested in table
‘BMX_D’ that contains body measures data. To better determine if that
table is of interest, we can display detailed information on the table
contents using nhanesTableVars.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">nhanesTableVars</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;BMX_D&#39;</span>)</span></code></pre></div>
<pre><code>##    Variable.Name                Variable.Description
## 1       BMDSTATS Body Measures Component status Code
## 2        BMIARMC           Arm Circumference Comment
## 3        BMIARML            Upper Arm Length Comment
## 4        BMICALF                Maximal Calf Comment
## 5        BMIHEAD          Head Circumference Comment
## 6          BMIHT             Standing Height Comment
## 7         BMILEG            Upper Leg Length Comment
## 8       BMIRECUM            Recumbent Length Comment
## 9         BMISUB        Subscapular Skinfold Comment
## 10      BMITHICR         Thigh Circumference Comment
## 11        BMITRI            Triceps Skinfold Comment
## 12      BMIWAIST         Waist Circumference Comment
## 13         BMIWT                      Weight Comment
## 14       BMXARMC              Arm Circumference (cm)
## 15       BMXARML               Upper Arm Length (cm)
## 16        BMXBMI           Body Mass Index (kg/m**2)
## 17       BMXCALF     Maximal Calf Circumference (cm)
## 18       BMXHEAD             Head Circumference (cm)
## 19         BMXHT                Standing Height (cm)
## 20        BMXLEG               Upper Leg Length (cm)
## 21      BMXRECUM               Recumbent Length (cm)
## 22        BMXSUB           Subscapular Skinfold (mm)
## 23      BMXTHICR            Thigh Circumference (cm)
## 24        BMXTRI               Triceps Skinfold (mm)
## 25      BMXWAIST            Waist Circumference (cm)
## 26         BMXWT                         Weight (kg)
## 27          SEQN         Respondent sequence number.</code></pre>
<p>We see that there are 27 columns in table BMX_D. SEQN is a subject
identifier that is used to join information across tables.</p>
</div>
<div id="import-nhanes-tables" class="section level3">
<h3>Import NHANES Tables</h3>
<p>We now import BMX_D along with the demographics table DEMO_D.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>bmx_d  <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;BMX_D&#39;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>demo_d <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DEMO_D&#39;</span>)</span></code></pre></div>
<p>We merge the tables and display several variables. Note that
RIAGENDR, like most categorical variables, is a coded field. By default,
the original coded values (1,2) are translated to (Male, Female).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>bmx_demo <span class="ot">&lt;-</span> <span class="fu">merge</span>(demo_d, bmx_d)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits=</span><span class="dv">4</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>select_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;RIAGENDR&#39;</span>, <span class="st">&#39;BMXHT&#39;</span>, <span class="st">&#39;BMXWT&#39;</span>, <span class="st">&#39;BMXLEG&#39;</span>, <span class="st">&#39;BMXCALF&#39;</span>, <span class="st">&#39;BMXTHICR&#39;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">print</span>(bmx_demo[<span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>,select_cols], <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##  RIAGENDR BMXHT BMXWT BMXLEG BMXCALF BMXTHICR
##    Female 156.0  75.2   38.0    36.6     53.7
##      Male 167.6  69.5   40.4    35.6     48.0
##    Female 163.7  45.0   39.2    31.7     41.3
##      Male 182.4 101.9   41.5    42.6     50.5</code></pre>
</div>
<div id="display-codebook" class="section level3">
<h3>Display Codebook</h3>
<p>For each variable, NHANES provides a codebook, which is a basic
description of the variable and also includes the distribution or range
of values. We can use nhanesCodebook to list the codebook definition for
the gender field RIAGENDR in table DEMO_D.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">nhanesCodebook</span>(<span class="st">&#39;DEMO_D&#39;</span>, <span class="st">&#39;RIAGENDR&#39;</span>)</span></code></pre></div>
<pre><code>## $`Variable Name`
## [1] &quot;RIAGENDR&quot;
## 
## $`SAS Label`
## [1] &quot;Gender&quot;
## 
## $`English Text`
## [1] &quot;Gender of the sample person&quot;
## 
## $Target
## [1] &quot;Both males and females 0 YEARS -\r 150 YEARS&quot;
## 
## $RIAGENDR
##   Code.or.Value Value.Description Count Cumulative Skip to Item
## 1             1              Male  5080       5080           NA
## 2             2            Female  5268      10348           NA
## 3             .           Missing     0      10348           NA</code></pre>
</div>
<div id="apply-code-translations" class="section level3">
<h3>Apply Code Translations</h3>
<p>As a default, the nhanes function will translate coded values. To
ensure proper interpretation of variables, it is recommended to always
use <code>nhanes</code> with the default option of translate = TRUE.
However, you may also customize the translation of coded fields manually
using nhanesTranslate. Customized translation of coded fields is a three
step process. 1: Download the table using nhanes with translate = FALSE
2: Select the table variables to translate 3: Pass the table and
variable list to nhanesTranslate</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>bpx_d <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;BPX_D&#39;</span>, <span class="at">translate=</span><span class="cn">FALSE</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">head</span>(bpx_d[,<span class="dv">6</span><span class="sc">:</span><span class="dv">11</span>])</span></code></pre></div>
<pre><code>##   BPQ150A BPQ150B BPQ150C BPQ150D BPAARM BPACSZ
## 1      NA      NA      NA      NA     NA     NA
## 2       2       2       2       2      1      3
## 3       1       2       2       2      1      4
## 4       2       2       2       2      1      3
## 5       2       2       2       2      1      4
## 6       2       2       2       2      1      4</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>bpx_d_vars  <span class="ot">&lt;-</span> <span class="fu">nhanesTableVars</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;BPX_D&#39;</span>, <span class="at">namesonly=</span><span class="cn">TRUE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#Alternatively may use bpx_d_vars = names(bpx_d)</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>bpx_d <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">&#39;BPX_D&#39;</span>, bpx_d_vars, <span class="at">data=</span>bpx_d)</span></code></pre></div>
<pre><code>## Translated columns: BPAARM BPACSZ BPAEN2 BPAEN3 BPAEN4 BPQ150A BPQ150B BPQ150C BPQ150D BPXPTY BPXPULS PEASCCT1 PEASCST1</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">head</span>(bpx_d[,<span class="dv">6</span><span class="sc">:</span><span class="dv">11</span>])</span></code></pre></div>
<pre><code>##   BPQ150A BPQ150B BPQ150C BPQ150D BPAARM        BPACSZ
## 1    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 2      No      No      No      No  Right Adult (12X22)
## 3     Yes      No      No      No  Right Large (15X32)
## 4      No      No      No      No  Right Adult (12X22)
## 5      No      No      No      No  Right Large (15X32)
## 6      No      No      No      No  Right Large (15X32)</code></pre>
<p>Some discretion should be applied when translating coded columns as
code translations can be quite long. To improve readability the
translation string is restricted to a default length of 128 but can be
set as high as 1024.</p>
</div>
<div id="download-a-complete-survey" class="section level3">
<h3>Download a Complete Survey</h3>
<p>The primary goal of nhanesA is to enable fully customizable
processing of select NHANES tables. However, it is quite easy to
download entire surveys using nhanesA functions. Say we want to download
every questionnaire in the 2007-2008 survey. We first get a list of the
table names by using nhanesTables with namesonly = TRUE. The tables can
then be downloaded using nhanes with lapply.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>q2007names  <span class="ot">&lt;-</span> <span class="fu">nhanesTables</span>(<span class="st">&#39;Q&#39;</span>, <span class="dv">2007</span>, <span class="at">namesonly=</span><span class="cn">TRUE</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>q2007tables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(q2007names, nhanes)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">names</span>(q2007tables) <span class="ot">&lt;-</span> q2007names</span></code></pre></div>
</div>
</div>
<div id="special-cases" class="section level2">
<h2>Special Cases</h2>
<p>Some NHANES measurements require special handling, e.g. due to
statistical considerations. Furthermore, there are surveys conducted
outside the scope of the continuous survey, but that are provided in a
similar format such that nhanesA can be readily adapted to retrieve
their data. Note that nhanesA cannot be used to handle accelerometer
data from 2003-2006. For those data, please see package <a href="https://cran.r-project.org/package=accelerometry">accelerometry</a>.</p>
<div id="pre-pandemic-data" class="section level3">
<h3>Pre-pandemic data</h3>
<p>Due to COVID, data collection for the 2019-2020 cycle was not
completed. In order to make better use of data that were collected, data
from the 2017-2018 survey were included to form a representative sample
of 2017-March 2020 pre-pandemic data. The table structure and variable
format of pre-pandemic tables is essentially identical to standard
continuous NHANES. The table names include the prefix “P_”. To list
pre-pandemic tables, use ‘P’ or ‘p’ as the year.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">#List all pre-pandemic tables</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">nhanesSearchTableNames</span>(<span class="st">&#39;^P_&#39;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">#List table variables</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">nhanesTableVars</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;P_AUX&#39;</span>, <span class="at">namesonly=</span><span class="cn">TRUE</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#List pre-pandemic EXAM tables</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="fu">nhanesTables</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;P&#39;</span>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co">#Table import, variable translation, and codebook display operate as usual</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>p_dxxfem <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;P_DXXFEM&#39;</span>)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="fu">nhanesTranslate</span>(<span class="st">&#39;P_BMX&#39;</span>, <span class="st">&#39;BMDSTATS&#39;</span>)</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="fu">nhanesCodebook</span>(<span class="st">&#39;P_INS&#39;</span>, <span class="st">&#39;LBDINSI&#39;</span>)</span></code></pre></div>
</div>
<div id="dual-energy-x-ray-absorptiometry" class="section level3">
<h3>Dual Energy X-Ray Absorptiometry</h3>
<p>Dual Energy X-Ray Absorptiometry (DXA) data were acquired from
1999-2006. These data were found to contain a higher amount of missing
values than usual, and a multiple imputation process was applied to fill
in missing and invalid values. More information may be found at <a href="https://wwwn.cdc.gov/nchs/nhanes/dxa/dxa.aspx" class="uri">https://wwwn.cdc.gov/nchs/nhanes/dxa/dxa.aspx</a>. By
default the DXA data are imported into the R environment, however,
because the tables are quite large it may be desirable to save the data
to a local file then import to R as needed. When nhanesTranslate is
applied to DXA data, only the 2005-2006 translation tables are used as
those are the only DXA codes that are currently available in html
format.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">#Import into R</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>dxx_b <span class="ot">&lt;-</span> <span class="fu">nhanesDXA</span>(<span class="dv">2001</span>)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">#Save to file</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="fu">nhanesDXA</span>(<span class="dv">2001</span>, <span class="at">destfile=</span><span class="st">&quot;dxx_b.xpt&quot;</span>)</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#Import supplemental data</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>dxx_c_s <span class="ot">&lt;-</span> <span class="fu">nhanesDXA</span>(<span class="dv">2003</span>, <span class="at">suppl=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co">#Apply code translations</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>dxalist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;DXAEXSTS&#39;</span>, <span class="st">&#39;DXIHE&#39;</span>)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>dxx_b <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">&quot;dxxb&quot;</span>,<span class="at">colnames=</span>dxalist, <span class="at">data=</span>dxx_b, <span class="at">dxa=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="nhanes-national-youth-fitness-survey-nnyfs" class="section level3">
<h3>NHANES National Youth Fitness Survey (NNYFS)</h3>
<p>NNYFS is a 2012 ancillary study conducted to assess physical activity
and fitness levels of children and teens from ages 3-15. This study
consists of questionnaires and basic measurements. There are no LAB
tables. NNYFS table names include the prefix “Y_”. To list tables, use
‘Y’ or ‘y’ as the year.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">#List NNYFS EXAM tables</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">nhanesTables</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;Y&#39;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">#Table import and variable translation operate as usual</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>y_cvx <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;Y_CVX&#39;</span>)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="fu">nhanesTranslate</span>(<span class="st">&#39;Y_CVX&#39;</span>,<span class="st">&#39;CVXPARC&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="searching-for-tables-and-variables" class="section level2">
<h2>Searching for tables and variables</h2>
<p>The NHANES repository is extensive, thus it is helpful to perform a
targeted search to identify relevant tables and variables. There are
several nhanesA functions that allow the user to search using different
criteria including the variable description, variable name, and table
name pattern.</p>
<div id="searching-across-the-comprehensive-list-of-nhanes-variables" class="section level3">
<h3>Searching across the comprehensive list of NHANES variables</h3>
<p>Comprehensive lists of NHANES variables are maintained for each data
group. For example, the demographics variables are available at <a href="https://wwwn.cdc.gov/nchs/nhanes/search/variablelist.aspx?Component=Demographics" class="uri">https://wwwn.cdc.gov/nchs/nhanes/search/variablelist.aspx?Component=Demographics</a>.
The nhanesSearch function allows the investigator to input search terms,
match against the comprehensive variable descriptions, and retrieve the
list of matching variables. Matching search terms (variable descriptions
must contain one of the terms) and exclusive search terms (variable
descriptions must NOT contain any exclusive terms) may be provided. The
search can be restricted to a specific survey range as well as specific
data groups.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># nhanesSearch use examples</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># Search on the word bladder, restrict to the 2001-2008 surveys, </span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co"># print out 50 characters of the variable description</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="st">&quot;bladder&quot;</span>, <span class="at">ystart=</span><span class="dv">2001</span>, <span class="at">ystop=</span><span class="dv">2008</span>, <span class="at">nchar=</span><span class="dv">50</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co"># Search on &quot;urin&quot; (will match urine, urinary, etc), from 1999-2010, return table names only</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="st">&quot;urin&quot;</span>, <span class="at">ignore.case=</span><span class="cn">TRUE</span>, <span class="at">ystop=</span><span class="dv">2010</span>, <span class="at">namesonly=</span><span class="cn">TRUE</span>)</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co"># Search on &quot;urin&quot;, exclude &quot;During&quot;, search surveys from 1999-2010, return table names only</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="st">&quot;urin&quot;</span>, <span class="at">exclude_terms=</span><span class="st">&quot;during&quot;</span>, <span class="at">ignore.case=</span><span class="cn">TRUE</span>, <span class="at">ystop=</span><span class="dv">2010</span>, <span class="at">namesonly=</span><span class="cn">TRUE</span>)</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co"># Restrict search to &#39;EXAM&#39; and &#39;LAB&#39; data groups. Explicitly list matching and exclude terms, leave ignore.case set to default value of FALSE. Search surveys from 2009 to present.</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="fu">c</span>(<span class="st">&quot;urin&quot;</span>, <span class="st">&quot;Urin&quot;</span>), <span class="at">exclude_terms=</span><span class="fu">c</span>(<span class="st">&quot;During&quot;</span>, <span class="st">&quot;eaten during&quot;</span>, <span class="st">&quot;do during&quot;</span>), <span class="at">data_group=</span><span class="fu">c</span>(<span class="st">&#39;EXAM&#39;</span>, <span class="st">&#39;LAB&#39;</span>), <span class="at">ystart=</span><span class="dv">2009</span>)</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co"># Search on &quot;tooth&quot; or &quot;teeth&quot;, all years</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="fu">c</span>(<span class="st">&quot;tooth&quot;</span>, <span class="st">&quot;teeth&quot;</span>), <span class="at">ignore.case=</span><span class="cn">TRUE</span>)</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="co"># Search for variables where the variable description begins with &quot;Tooth&quot;</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="fu">nhanesSearch</span>(<span class="st">&quot;^Tooth&quot;</span>)</span></code></pre></div>
</div>
<div id="searching-for-tables-that-contain-a-specific-variable" class="section level3">
<h3>Searching for tables that contain a specific variable</h3>
<p>nhanesSearch is a versatile search function as it imports the
comprehensive variable lists to a data frame. That allows for detailed
conditional extraction of the variables. However, each call to
nhanesSearch takes up to a minute or more to process. Faster processing
can be achieved when we know the name of a specific variable of interest
and we look only for exact matches to the variable name. Function
nhanesSearchVarName matches a given variable name in the html directly,
then only the matching elements are converted to a data frame.
Consequently, a call to nhanesSearchVarName executes much faster than
nhanesSearch; typically under 30s. nhanesSearchVarName is useful for
finding all data tables that contain a given variable.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co">#nhanesSearchVarName use examples</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">nhanesSearchVarName</span>(<span class="st">&#39;BPXPULS&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;BPX_D&quot; &quot;BPX_E&quot; &quot;BPX&quot;   &quot;BPX_C&quot; &quot;BPX_B&quot; &quot;BPX_F&quot; &quot;BPX_G&quot; &quot;BPX_H&quot; &quot;BPX_I&quot;
## [10] &quot;BPX_J&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">nhanesSearchVarName</span>(<span class="st">&#39;CSQ260i&#39;</span>, <span class="at">includerdc=</span><span class="cn">TRUE</span>, <span class="at">nchar=</span><span class="dv">38</span>, <span class="at">namesonly=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##   Variable.Name                   Variable.Description Data.File.Name
## 1       CSQ260i Do you now have any of the following p        CSX_G_R
## 2       CSQ260i Do you now have any of the following p          CSX_H
##   Data.File.Description Begin.Year EndYear   Component Use.Constraints
## 1         Taste &amp; Smell       2012    2012 Examination        RDC Only
## 2         Taste &amp; Smell       2013    2014 Examination            None</code></pre>
</div>
<div id="searching-for-tables-by-name-pattern" class="section level3">
<h3>Searching for tables by name pattern</h3>
<p>In order to group data across surveys, it is useful to list all
available tables that follow a given naming pattern. Function
nhanesSearchTableNames is used for such pattern matching. For example,
if we want to work with all available body measures data we can retrieve
the full list of available tables with nhanesSearchTableNames(‘BMX’).
The search is conducted over the comprehensive table list, which is much
smaller than the comprehensive variable list, such that a call to
nhanesSearchTableNames takes only a few seconds.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># nhanesSearchTableNames use examples</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="fu">nhanesSearchTableNames</span>(<span class="st">&#39;BMX&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;BMX_D&quot; &quot;BMX&quot;   &quot;BMX_E&quot; &quot;BMX_C&quot; &quot;BMX_B&quot; &quot;BMX_F&quot; &quot;BMX_H&quot; &quot;BMX_G&quot; &quot;BMX_I&quot;
## [10] &quot;BMX_J&quot; &quot;P_BMX&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">nhanesSearchTableNames</span>(<span class="st">&#39;HPVS&#39;</span>, <span class="at">includerdc=</span><span class="cn">TRUE</span>, <span class="at">nchar=</span><span class="dv">42</span>, <span class="at">details=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##        Years     Doc.File                      Data.File        Date.Published
## 1  2009-2010 HPVSER_F Doc HPVSER_F Data [XPT - 171.6 KB]         November 2013
## 2  2007-2008 HPVSER_E Doc HPVSER_E Data [XPT - 155.7 KB]         November 2013
## 3  2005-2006 HPVSER_D Doc HPVSER_D Data [XPT - 151.6 KB]             July 2013
## 4  2005-2006 HPVSRM_D Doc HPVSRM_D Data [XPT - 302.6 KB]          January 2015
## 5  2007-2008 HPVSWR_E Doc HPVSWR_E Data [XPT - 677.9 KB]           August 2012
## 6  2009-2010 HPVSWR_F Doc HPVSWR_F Data [XPT - 725.2 KB]           August 2012
## 7  2011-2012 HPVSWR_G Doc HPVSWR_G Data [XPT - 661.1 KB]            March 2015
## 8  2005-2006 HPVSWR_D Doc HPVSWR_D Data [XPT - 694.4 KB] Updated November 2018
## 9  2013-2014 HPVSWR_H Doc HPVSWR_H Data [XPT - 716.6 KB]         December 2016
## 10 2015-2016 HPVSWC_I Doc  HPVSWC_I Data [XPT - 33.3 KB]         November 2018
## 11 2015-2016 HPVSWR_I Doc HPVSWR_I Data [XPT - 667.5 KB]         November 2018
## 12 2005-2006 HPVS_D_R Doc                       RDC Only             July 2013
## 13 2009-2010 HPVS_F_R Doc                       RDC Only           August 2012
## 14 2011-2012 HPVS_G_R Doc                       RDC Only            March 2015
## 15 2013-2014 HPVS_H_R Doc                       RDC Only         December 2016
## 16 2015-2016 HPVS_I_R Doc                       RDC Only         November 2018
## 17 2017-2018 HPVS_J_R Doc                       RDC Only         December 2020</code></pre>
<div id="please-send-any-feedback-or-requests-to-cjendres1gmail.com.-hope-you-enjoy-your-experience-with-nhanesa" class="section level4">
<h4>Please send any feedback or requests to <a href="mailto:cjendres1@gmail.com" class="email">cjendres1@gmail.com</a>.
Hope you enjoy your experience with nhanesA!</h4>
<p>Sincerely,<br />
Christopher J. Endres</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
